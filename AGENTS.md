# AI 에이전트 개발 가이드

이 문서는 AI 에이전트가 saju-logic 프로젝트 개발을 효과적으로 지원하기 위한 지침을 제공합니다.

## 1. 기본 원칙 (Core Principles)

- **모범 사례 준수**: 솔루션을 제공할 때는 항상 현대적인 개발 모범 사례를 따라야 합니다.
    - 깨끗하고 유지보수 가능하며 잘 문서화된 코드 작성
    - 논리적이고 확장 가능한 프로젝트 구조 보장
    - 빌드 및 테스트와 같은 작업에 대한 적절한 자동화 적용
    - 사용 중인 기술(예: TypeScript, Node.js, npm)에 대한 확립된 규칙 준수

- **테스트 주도 개발 (TDD) 채택**: 모든 기능 개발은 테스트 코드 작성으로 시작합니다.
    - **Red-Green-Refactor**: 실패하는 테스트(Red)를 먼저 작성하고, 테스트를 통과하는 최소한의 코드(Green)를 작성한 후, 코드를 리팩토링(Refactor)하는 사이클을 따릅니다.
    - **Vitest 활용**: 프로젝트에 설정된 `vitest`를 사용하여 단위 테스트 및 통합 테스트를 작성합니다.

- **간결하고 유용한 응답**: 답변은 직접적이고 이해하기 쉬워야 하며, 사용자의 요청을 효율적으로 해결하는 데 중점을 두어야 합니다.

- **한국어 응답 (Korean Responses)**: 사용자와의 모든 상호작용은 명확하고 자연스러운 한국어를 사용해야 합니다. 기술 용어는 원어를 병기할 수 있으나, 설명과 답변의 기본 언어는 한국어입니다.

- **일관성 유지**: 모범 사례를 적용하면서도, 새로운 코드나 구성이 기존 프로젝트의 스타일 및 구조와 일관성을 유지하도록 해야 합니다.

- **참조 소스 존중 (Respect for Reference Source)**: `@/references` 디렉터리는 벤치마킹 대상인 원본 소스 코드를 담고 있습니다.
    - **읽기 전용**: 이 디렉터리의 파일은 **절대 수정해서는 안 됩니다.**
    - **분석 및 학습**: 로직을 이해하고 학습하기 위한 목적으로만 사용해야 합니다.
    - **충실한 복제 (Faithful Replication)**: `@/src`에 로직을 구현할 때는, 원본의 **구조, 패턴, 로직 흐름, 데이터 구조를 최대한 동일하게 복제**해야 합니다. 단순한 기능 재구현이 아님을 명심해야 합니다.
    - **예외: `lunar.ts` 모듈**: `lunar.ts` 모듈의 경우, 참조 소스는 `lunar-javascript` 라이브러리를 사용하나, 우리 프로젝트에서는 타입 안정성 및 개발 경험 개선을 위해 `lunar-typescript` 라이브러리로 내부 구현을 대체합니다. 단, `lunar.ts` 모듈의 외부 인터페이스(함수 시그니처, 반환 타입)는 참조 소스와 동일하게 유지하여 다른 모듈에 미치는 영향을 최소화합니다.

- **자의적 최적화 및 변경 금지 (No Arbitrary Optimization or Changes)**:
    - **원본 의도 존중**: 원본 코드의 구조가 비효율적이거나 중복이 있어 보이더라도, 임의로 수정하거나 리팩토링해서는 안 됩니다. 이는 의도된 설계일 수 있습니다.
    - **선 확인, 후 구현**: 원본 코드의 특정 구현 방식(예: `DateFnsDate` 구조체 사용)에 대한 의도가 불분명할 경우, **반드시 사용자에게 먼저 질문하여 의도를 확인**한 후에 구현을 진행해야 합니다.
    - **안일한 추정 금지**: 'null이 반환될 리 없다'와 같이 안일하게 추정하고 `!`(non-null assertion)을 남용하지 않습니다. 원본 코드의 방어적 로직(null 체크 등)을 반드시 존중하고 동일하게 구현합니다.
    - **예외: `lunar.ts` 모듈**: `lunar.ts` 모듈의 내부 구현은 `lunar-javascript` 대신 `lunar-typescript`를 사용하도록 변경되었습니다. 이는 `lunar-javascript`의 타입 정의 부재로 인한 개발 경험 저하 문제를 해결하기 위한 합리적인 결정이며, 모듈의 외부 인터페이스는 참조 소스와 동일하게 유지됩니다.

---

## 2. 온보딩 프로세스 (Onboarding Process)

새로운 채팅 세션이 시작될 때, AI 에이전트는 프로젝트의 맥락을 파악하기 위해 다음 단계를 반드시 수행해야 합니다.

1.  **프로젝트 `README.md` 파일 읽기**: 이 파일은 프로젝트의 개요, 목표, 기본 설정 방법을 담고 있습니다.
2.  **`docs` 디렉터리의 모든 문서 정독**: 이 디렉터리는 프로젝트의 아키텍처, 기능, 동작 흐름에 대한 상세한 문서를 포함합니다. 효과적인 개발 지원을 위해서는 이 문서들에 대한 완전한 이해가 필수적입니다.
3.  **`@/works` 디렉터리의 `README.md` 파일 정독**: 작업 관리 워크플로우를 숙지합니다.

---

## 3. 작업 프로세스 준수 (Workflow Compliance)

AI 에이전트는 `works/README.md` 파일에 정의된 **작업 관리 워크플로우를 반드시 준수**해야 합니다. 특히 다음 사항을 엄격히 따릅니다.

-   **작업 파일 생성**: 새로운 작업을 시작할 때는 `works/issues/open` 디렉토리에 마크다운 형식의 작업 파일을 생성합니다. 파일에는 **요구사항**과 함께 **테스트 시나리오**를 반드시 포함해야 합니다. 이는 TDD 원칙을 준수하고 작업의 완료 기준을 명확히 하기 위함입니다.
    -   **테스트 시나리오 항목**: 성공 케이스, 실패 케이스(예: 잘못된 입력, 권한 없음), 엣지 케이스 등을 구체적으로 기술합니다.
-   **작업 파일 이동**: 작업을 시작할 때는 `open/` 폴더에서 `in-progress/` 폴더로 파일을 이동시키고, 작업 완료 시에는 `in-progress/` 폴더에서 `done/` 폴더로 파일을 이동시켜야 합니다.
-   **파일 내용 유지**: 작업 파일의 내용은 비우지 않고, 해당 작업의 진행 상황 및 완료 여부를 명확히 표시해야 합니다. (예: 요구사항 및 테스트 시나리오 체크리스트 업데이트)
-   **명확한 상태 관리**: 각 작업 파일의 상태(open, in-progress, done)는 해당 파일이 위치한 폴더로 명확하게 구분되어야 합니다.

이 단계들을 따르면, AI 에이전트는 saju-logic 프로젝트에 대해 정확하고 맥락에 맞는 지원을 제공할 수 있는 준비를 갖추게 됩니다.
